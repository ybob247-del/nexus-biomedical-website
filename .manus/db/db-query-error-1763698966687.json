{
  "query": "CREATE TABLE IF NOT EXISTS supplement_protocols (\n    id SERIAL PRIMARY KEY,\n    protocol_name VARCHAR(255) NOT NULL,\n    target_condition VARCHAR(255),\n    hormone_system VARCHAR(100),\n    supplements JSONB,\n    duration_weeks INTEGER,\n    expected_outcomes TEXT,\n    contraindications TEXT,\n    monitoring_recommendations TEXT,\n    evidence_summary TEXT,\n    research_citations TEXT[],\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS user_supplement_plans (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL,\n    assessment_id INTEGER REFERENCES user_assessments(id),\n    protocol_id INTEGER REFERENCES supplement_protocols(id),\n    start_date DATE NOT NULL,\n    end_date DATE,\n    is_active BOOLEAN DEFAULT true,\n    adherence_rate INTEGER CHECK (adherence_rate BETWEEN 0 AND 100),\n    notes TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS progress_tracking (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL,\n    assessment_id INTEGER REFERENCES user_assessments(id),\n    tracking_date DATE NOT NULL,\n    symptom_changes JSONB,\n    lifestyle_changes JSONB,\n    overall_improvement INTEGER CHECK (overall_improvement BETWEEN -10 AND 10),\n    notes TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS product_database (\n    id SERIAL PRIMARY KEY,\n    product_name VARCHAR(255) NOT NULL,\n    product_category VARCHAR(100),\n    brand VARCHAR(255),\n    edc_free BOOLEAN DEFAULT false,\n    certifications TEXT[],\n    ingredients TEXT[],\n    harmful_ingredients TEXT[],\n    safety_rating VARCHAR(50),\n    price_range VARCHAR(50),\n    where_to_buy TEXT[],\n    product_url TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS educational_content (\n    id SERIAL PRIMARY KEY,\n    title VARCHAR(255) NOT NULL,\n    content_type VARCHAR(50),\n    category VARCHAR(100),\n    content TEXT,\n    key_takeaways TEXT[],\n    references TEXT[],\n    difficulty_level VARCHAR(50),\n    reading_time_minutes INTEGER,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX IF NOT EXISTS idx_user_assessments_user ON user_assessments(user_id);\nCREATE INDEX IF NOT EXISTS idx_exposure_assessments_assessment ON exposure_assessments(assessment_id);\nCREATE INDEX IF NOT EXISTS idx_recommendations_assessment ON recommendations(assessment_id);\nCREATE INDEX IF NOT EXISTS idx_user_supplement_plans_user ON user_supplement_plans(user_id);\nCREATE INDEX IF NOT EXISTS idx_progress_tracking_user ON progress_tracking(user_id);\nCREATE INDEX IF NOT EXISTS idx_product_database_category ON product_database(product_category);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bdzn41uM6mMWcv.97707ddd6929 --database 3gcYftfyZmb2335Uoynmho --execute CREATE TABLE IF NOT EXISTS supplement_protocols (\n    id SERIAL PRIMARY KEY,\n    protocol_name VARCHAR(255) NOT NULL,\n    target_condition VARCHAR(255),\n    hormone_system VARCHAR(100),\n    supplements JSONB,\n    duration_weeks INTEGER,\n    expected_outcomes TEXT,\n    contraindications TEXT,\n    monitoring_recommendations TEXT,\n    evidence_summary TEXT,\n    research_citations TEXT[],\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS user_supplement_plans (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL,\n    assessment_id INTEGER REFERENCES user_assessments(id),\n    protocol_id INTEGER REFERENCES supplement_protocols(id),\n    start_date DATE NOT NULL,\n    end_date DATE,\n    is_active BOOLEAN DEFAULT true,\n    adherence_rate INTEGER CHECK (adherence_rate BETWEEN 0 AND 100),\n    notes TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS progress_tracking (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL,\n    assessment_id INTEGER REFERENCES user_assessments(id),\n    tracking_date DATE NOT NULL,\n    symptom_changes JSONB,\n    lifestyle_changes JSONB,\n    overall_improvement INTEGER CHECK (overall_improvement BETWEEN -10 AND 10),\n    notes TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS product_database (\n    id SERIAL PRIMARY KEY,\n    product_name VARCHAR(255) NOT NULL,\n    product_category VARCHAR(100),\n    brand VARCHAR(255),\n    edc_free BOOLEAN DEFAULT false,\n    certifications TEXT[],\n    ingredients TEXT[],\n    harmful_ingredients TEXT[],\n    safety_rating VARCHAR(50),\n    price_range VARCHAR(50),\n    where_to_buy TEXT[],\n    product_url TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS educational_content (\n    id SERIAL PRIMARY KEY,\n    title VARCHAR(255) NOT NULL,\n    content_type VARCHAR(50),\n    category VARCHAR(100),\n    content TEXT,\n    key_takeaways TEXT[],\n    references TEXT[],\n    difficulty_level VARCHAR(50),\n    reading_time_minutes INTEGER,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX IF NOT EXISTS idx_user_assessments_user ON user_assessments(user_id);\nCREATE INDEX IF NOT EXISTS idx_exposure_assessments_assessment ON exposure_assessments(assessment_id);\nCREATE INDEX IF NOT EXISTS idx_recommendations_assessment ON recommendations(assessment_id);\nCREATE INDEX IF NOT EXISTS idx_user_supplement_plans_user ON user_supplement_plans(user_id);\nCREATE INDEX IF NOT EXISTS idx_progress_tracking_user ON progress_tracking(user_id);\nCREATE INDEX IF NOT EXISTS idx_product_database_category ON product_database(product_category);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 6 column 22 near \"JSONB,",
    "    duration_weeks INTEGER,",
    "    expected_outcomes TEXT,",
    "    contraindications TEXT,",
    "    monitoring_recommendations TEXT,",
    "    evidence_summary TEXT,",
    "    research_citations TEXT[],",
    "    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
    ")\""
  ]
}