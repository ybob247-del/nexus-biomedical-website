{
  "query": "-- Beta Feedback System Tables\n\n-- Main feedback table\nCREATE TABLE IF NOT EXISTS beta_feedback (\n  id SERIAL PRIMARY KEY,\n  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n  feedback_type VARCHAR(50) NOT NULL,\n  track VARCHAR(50),\n  week_number INTEGER,\n  nps_score INTEGER CHECK (nps_score >= 0 AND nps_score <= 10),\n  overall_satisfaction INTEGER CHECK (overall_satisfaction >= 1 AND overall_satisfaction <= 5),\n  ease_of_use_rating INTEGER CHECK (ease_of_use_rating >= 1 AND ease_of_use_rating <= 5),\n  accuracy_rating INTEGER CHECK (accuracy_rating >= 1 AND accuracy_rating <= 5),\n  usefulness_rating INTEGER CHECK (usefulness_rating >= 1 AND usefulness_rating <= 5),\n  prefer_mobile_app VARCHAR(50),\n  mobile_platforms TEXT[],\n  mobile_app_features TEXT,\n  mobile_app_pricing VARCHAR(50),\n  what_works_well TEXT,\n  what_needs_improvement TEXT,\n  feature_requests TEXT,\n  testimonial TEXT,\n  would_recommend BOOLEAN,\n  would_pay_after_beta BOOLEAN,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS beta_survey_schedule (\n  id SERIAL PRIMARY KEY,\n  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n  week_number INTEGER NOT NULL,\n  scheduled_date DATE NOT NULL,\n  sent_at TIMESTAMP,\n  completed_at TIMESTAMP,\n  reminder_sent_at TIMESTAMP,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  UNIQUE(user_id, week_number)\n);\n\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_user_id ON beta_feedback(user_id);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_track ON beta_feedback(track);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_week ON beta_feedback(week_number);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_created ON beta_feedback(created_at);\nCREATE INDEX IF NOT EXISTS idx_survey_schedule_user ON beta_survey_schedule(user_id);\nCREATE INDEX IF NOT EXISTS idx_survey_schedule_date ON beta_survey_schedule(scheduled_date);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2bdzn41uM6mMWcv.97707ddd6929 --database 3gcYftfyZmb2335Uoynmho --execute -- Beta Feedback System Tables\n\n-- Main feedback table\nCREATE TABLE IF NOT EXISTS beta_feedback (\n  id SERIAL PRIMARY KEY,\n  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n  feedback_type VARCHAR(50) NOT NULL,\n  track VARCHAR(50),\n  week_number INTEGER,\n  nps_score INTEGER CHECK (nps_score >= 0 AND nps_score <= 10),\n  overall_satisfaction INTEGER CHECK (overall_satisfaction >= 1 AND overall_satisfaction <= 5),\n  ease_of_use_rating INTEGER CHECK (ease_of_use_rating >= 1 AND ease_of_use_rating <= 5),\n  accuracy_rating INTEGER CHECK (accuracy_rating >= 1 AND accuracy_rating <= 5),\n  usefulness_rating INTEGER CHECK (usefulness_rating >= 1 AND usefulness_rating <= 5),\n  prefer_mobile_app VARCHAR(50),\n  mobile_platforms TEXT[],\n  mobile_app_features TEXT,\n  mobile_app_pricing VARCHAR(50),\n  what_works_well TEXT,\n  what_needs_improvement TEXT,\n  feature_requests TEXT,\n  testimonial TEXT,\n  would_recommend BOOLEAN,\n  would_pay_after_beta BOOLEAN,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS beta_survey_schedule (\n  id SERIAL PRIMARY KEY,\n  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n  week_number INTEGER NOT NULL,\n  scheduled_date DATE NOT NULL,\n  sent_at TIMESTAMP,\n  completed_at TIMESTAMP,\n  reminder_sent_at TIMESTAMP,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  UNIQUE(user_id, week_number)\n);\n\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_user_id ON beta_feedback(user_id);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_track ON beta_feedback(track);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_week ON beta_feedback(week_number);\nCREATE INDEX IF NOT EXISTS idx_beta_feedback_created ON beta_feedback(created_at);\nCREATE INDEX IF NOT EXISTS idx_survey_schedule_user ON beta_survey_schedule(user_id);\nCREATE INDEX IF NOT EXISTS idx_survey_schedule_date ON beta_survey_schedule(scheduled_date);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 4: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 13 column 25 near \"[],",
    "  mobile_app_features TEXT,",
    "  mobile_app_pricing VARCHAR(50),",
    "  what_works_well TEXT,",
    "  what_needs_improvement TEXT,",
    "  feature_requests TEXT,",
    "  testimonial TEXT,",
    "  would_recommend BOOLEAN,",
    "  would_pay_after_beta BOOLEAN,",
    "  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
    "  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
    ")\""
  ]
}